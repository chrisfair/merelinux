

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Build Essential and Core Packages &mdash; Mere Linux 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="4. Extra Packages" href="extra.html" />
    <link rel="prev" title="2. Base Layout" href="base-layout.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Mere Linux
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../gettingstarted/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../static_tools.html">Static Tools</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Bootstrapping</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../setup_environment.html">Setup a Default Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../temptools.html">Temporary Tools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../packaging.html">Packaging the Final System</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="prepare.html">1. Prepare for Packaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="base-layout.html">2. Base Layout</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">3. Build Essential and Core Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="extra.html">4. Extra Packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../workflow.html">Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../concepts/index.html">Concepts</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Mere Linux</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Development</a> &raquo;</li>
        
          <li><a href="../index.html">Bootstrapping</a> &raquo;</li>
        
          <li><a href="../packaging.html">Packaging the Final System</a> &raquo;</li>
        
      <li>3. Build Essential and Core Packages</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="build-essential-and-core-packages">
<h1>3. Build Essential and Core Packages<a class="headerlink" href="#build-essential-and-core-packages" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>In addition to <cite>base-layout</cite>, the core group of packages for any Mere
system is really only <cite>Linux</cite>, <cite>pacman</cite>, <cite>busybox</cite>, and
<cite>s6</cite>. That’s all that is required at run-time for a system that boots,
can configure a network connection, has a shell with utilities, can launch
and supervise services, and can install other packages as needed.</p>
<p>In order to have an environment that can <em>build</em> packages for Mere, however,
there are several more essential packages required. This section will fill
out all the rest of the packages needed for building, getting most of the
core packages in the process. It will finish by building any remaining core
packages.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The commands for building when using the included scripts are fairly simple
and repetitive, but watch out for subtle differences! The process of
bootstrapping some early packages requires a few special steps.</p>
</div>
<div class="section" id="linux-headers">
<h2>3.1. Linux Headers<a class="headerlink" href="#linux-headers" title="Permalink to this headline">¶</a></h2>
<p>We need the Linux kernel headers now, which are typically packaged alongside
the kernel itself. Because building the kernel would bring in some dependencies
that aren’t built yet, we’ll use some special features of <strong class="command">makepkg</strong> to
only extract the source and ‘repackage’ just the headers, without building.
We’ll build the full kernel a little bit later on.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the build script to enter into the container</span>
sudo -E ./scripts/build.sh packages/linux

<span class="c1"># Inside the container environment download and extract the source</span>
makepkg -L -o --nodeps

<span class="c1"># Using a special PKGBUILD file, create only the headers package for now</span>
makepkg -R -p PKGBUILD-headers --nodeps

<span class="c1"># Exit the container</span>
<span class="nb">exit</span>

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/linux

<span class="c1"># Update the list of required packages:</span>
<span class="nb">export</span> <span class="nv">mere_base</span><span class="o">+=</span><span class="s2">&quot; linux-headers&quot;</span>
</pre></div>
</div>
<p>The build order of the packages below removes the need to set the variable
in most cases. However there will still be one or two places where it is
required.</p>
</div>
<div class="section" id="musl">
<h2>3.2. Musl<a class="headerlink" href="#musl" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/musl -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/musl

<span class="c1"># Update the list of required packages:</span>
<span class="nb">export</span> <span class="nv">mere_base</span><span class="o">+=</span><span class="s2">&quot; musl musl-dev&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="adjust-the-toolchain">
<h2>3.3. Adjust the Toolchain<a class="headerlink" href="#adjust-the-toolchain" title="Permalink to this headline">¶</a></h2>
<p>Now, adjust the toolchain located in <cite>/mere</cite> to use the paths
provided by the new package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Move the previously prepared linkers into place</span>
sudo mv -v /mere/bin/<span class="o">{</span>ld,ld-old<span class="o">}</span>
sudo mv -v /mere/x86_64-pc-linux-musl/bin/<span class="o">{</span>ld,ld-old<span class="o">}</span>
sudo mv -v /mere/bin/<span class="o">{</span>ld-new,ld<span class="o">}</span>
sudo ln -sv /mere/bin/ld /mere/x86_64-pc-linux-musl/bin/ld

<span class="c1"># Adjust gcc&#39;s search paths</span>
/mere/bin/gcc -dumpspecs <span class="p">|</span> sed -e <span class="s1">&#39;s@/mere@@g&#39;</span> <span class="se">\</span>
    -e <span class="s1">&#39;/\*startfile_prefix_spec:/{n;s@.*@/lib/ @}&#39;</span> <span class="se">\</span>
    -e <span class="s1">&#39;/\*cpp:/{n;s@$@ -isystem /include@}&#39;</span> <span class="se">\</span>
    <span class="p">|</span> sudo tee <span class="k">$(</span>dirname <span class="k">$(</span>/mere/bin/gcc --print-libgcc-file-name<span class="k">))</span>/specs
</pre></div>
</div>
</div>
<div class="section" id="zlib">
<h2>3.4. Zlib<a class="headerlink" href="#zlib" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/zlib -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/zlib
</pre></div>
</div>
</div>
<div class="section" id="binutils">
<h2>3.5. Binutils<a class="headerlink" href="#binutils" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/binutils -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/binutils

<span class="c1"># Update the list of required packages:</span>
<span class="nb">export</span> <span class="nv">mere_base</span><span class="o">+=</span><span class="s2">&quot; binutils&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="gmp">
<h2>3.6. GMP<a class="headerlink" href="#gmp" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/gmp -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/gmp
</pre></div>
</div>
</div>
<div class="section" id="mpfr">
<h2>3.7. MPFR<a class="headerlink" href="#mpfr" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/mpfr -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/mpfr
</pre></div>
</div>
</div>
<div class="section" id="mpc">
<h2>3.8. MPC<a class="headerlink" href="#mpc" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/mpc -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/mpc
</pre></div>
</div>
</div>
<div class="section" id="gcc">
<h2>3.9. GCC<a class="headerlink" href="#gcc" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/gcc -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/gcc

<span class="c1"># Update the list of required packages:</span>
<span class="nb">export</span> <span class="nv">mere_base</span><span class="o">+=</span><span class="s2">&quot; gcc&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="busybox">
<h2>3.10. Busybox<a class="headerlink" href="#busybox" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/busybox -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/busybox

<span class="c1"># Update the list of required packages:</span>
<span class="nb">export</span> <span class="nv">mere_base</span><span class="o">+=</span><span class="s2">&quot; busybox&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="m4">
<h2>3.11. M4<a class="headerlink" href="#m4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/m4 -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/m4
</pre></div>
</div>
</div>
<div class="section" id="gettext">
<h2>3.12. Gettext<a class="headerlink" href="#gettext" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/gettext -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/gettext
</pre></div>
</div>
</div>
<div class="section" id="perl">
<h2>3.13. Perl<a class="headerlink" href="#perl" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/perl -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/perl
</pre></div>
</div>
</div>
<div class="section" id="autoconf">
<h2>3.14. Autoconf<a class="headerlink" href="#autoconf" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/autoconf -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/autoconf
</pre></div>
</div>
</div>
<div class="section" id="automake">
<h2>3.15. Automake<a class="headerlink" href="#automake" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/automake -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/automake
</pre></div>
</div>
</div>
<div class="section" id="libtool">
<h2>3.16. Libtool<a class="headerlink" href="#libtool" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/libtool -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/libtool
</pre></div>
</div>
</div>
<div class="section" id="ncurses">
<h2>3.17. Ncurses<a class="headerlink" href="#ncurses" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
<span class="nv">mere_no_deps</span><span class="o">=</span><span class="m">1</span> sudo -E ./scripts/build.sh packages/ncurses -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/ncurses
</pre></div>
</div>
<p>The <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">mere_no_deps</span></code> variable is used here to tell <strong class="command">makepkg</strong> to
not try to install any missing build dependencies defined in the build recipe.
More specifically, the variable tells <code class="file docutils literal notranslate"><span class="pre">scripts/build.sh</span></code> to pass the
<code class="samp docutils literal notranslate"><span class="pre">-d</span></code>, or <code class="samp docutils literal notranslate"><span class="pre">--nodeps</span></code> flag to <strong class="command">makepkg</strong>.</p>
<p>We do this because <cite>ncurses</cite> requires utilities it itself provides in
order to fully build. Under normal circumstances <strong class="command">makepkg</strong> can just
install the previously built <cite>ncurses</cite> package in the <cite>pacman</cite>
repository. When bootstrapping, however, that’s unavailable. Instead we tell it
to ignore dependencies, and the build recipe will just make use of the
utilities already installed in <cite>/mere</cite>.</p>
</div>
<div class="section" id="readline">
<h2>3.18. Readline<a class="headerlink" href="#readline" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/readline -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/readline
</pre></div>
</div>
</div>
<div class="section" id="bash">
<h2>3.19. Bash<a class="headerlink" href="#bash" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/bash -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/bash

<span class="c1"># Update the list of required packages:</span>
<span class="nb">export</span> <span class="nv">mere_base</span><span class="o">+=</span><span class="s2">&quot; bash&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="pkgconf">
<h2>3.20. Pkgconf<a class="headerlink" href="#pkgconf" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/pkgconf -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/pkgconf

<span class="c1"># Update the list of required packages:</span>
<span class="nb">export</span> <span class="nv">mere_base</span><span class="o">+=</span><span class="s2">&quot; pkgconf&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="make">
<h2>3.21. Make<a class="headerlink" href="#make" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/make -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/make

<span class="c1"># Update the list of required packages:</span>
<span class="nb">export</span> <span class="nv">mere_base</span><span class="o">+=</span><span class="s2">&quot; make&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="patch">
<h2>3.22. Patch<a class="headerlink" href="#patch" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/patch -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/patch

<span class="c1"># Update the list of required packages:</span>
<span class="nb">export</span> <span class="nv">mere_base</span><span class="o">+=</span><span class="s2">&quot; patch&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="attr">
<h2>3.23. Attr<a class="headerlink" href="#attr" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/attr -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/attr
</pre></div>
</div>
</div>
<div class="section" id="acl">
<h2>3.24. Acl<a class="headerlink" href="#acl" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/acl -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/acl
</pre></div>
</div>
</div>
<div class="section" id="xz">
<h2>3.25. Xz<a class="headerlink" href="#xz" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/xz -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/xz
</pre></div>
</div>
</div>
<div class="section" id="nettle">
<h2>3.26. Nettle<a class="headerlink" href="#nettle" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/nettle -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/nettle
</pre></div>
</div>
</div>
<div class="section" id="libarchive">
<h2>3.27. Libarchive<a class="headerlink" href="#libarchive" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/libarchive -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/libarchive
</pre></div>
</div>
</div>
<div class="section" id="libressl">
<h2>3.28. Libressl<a class="headerlink" href="#libressl" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/libressl -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/libressl
</pre></div>
</div>
</div>
<div class="section" id="curl">
<h2>3.29. Curl<a class="headerlink" href="#curl" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/curl -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/curl
</pre></div>
</div>
</div>
<div class="section" id="file">
<h2>3.30. File<a class="headerlink" href="#file" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/file -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/file
</pre></div>
</div>
</div>
<div class="section" id="pacman">
<h2>3.31. Pacman<a class="headerlink" href="#pacman" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/pacman -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/pacman
</pre></div>
</div>
</div>
<div class="section" id="build-essential">
<h2>3.32. Build Essential<a class="headerlink" href="#build-essential" title="Permalink to this headline">¶</a></h2>
<p><cite>build-essential</cite> is a meta package that has dependencies on the bare minimum
of packages needed to compile most other packages. When the <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">mere_base</span></code>
variable is unset, this package as well as <cite>base-layout</cite> are installed into
new merebuild containers.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo -E ./scripts/build.sh packages/build-essential -a

<span class="c1"># Add all new packages to the repository</span>
sudo -E ./scripts/add_all_new_pkgs.sh packages/build-essential
</pre></div>
</div>
<p>At this point, we no longer need the extra logic enabled by the environment
variables. Also, all the commands to build a package going forward will
follow the exact same patterns, using the provided scripts.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unset the environment variables</span>
<span class="nb">unset</span> mere_bootstrap
<span class="nb">unset</span> mere_base
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Congragtulations! With the build-essential meta package and all of its
dependencies built, you have now bootstrapped everything you need to build
and test your own packages. If that is what you are interested in doing,
you may want to jump ahead to <a class="reference internal" href="../../workflow.html#workflow"><span class="std std-ref">Workflow</span></a>. Otherwise, continuing here
will fill out what you need to finish <a class="reference internal" href="../../../gettingstarted/index.html#create-disk-image"><span class="std std-ref">Creating a Disk Image</span></a>.</p>
</div>
<p>There’s just two more core items, <cite>linux</cite> and <cite>s6</cite> and their
dependencies remaining to be packaged. Build them now:</p>
</div>
<div class="section" id="bison">
<h2>3.33. Bison<a class="headerlink" href="#bison" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo ./scripts/build.sh packages/bison -a

<span class="c1"># Add all new packages to the repository</span>
sudo ./scripts/add_all_new_pkgs.sh packages/bison
</pre></div>
</div>
</div>
<div class="section" id="flex">
<h2>3.34. Flex<a class="headerlink" href="#flex" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo ./scripts/build.sh packages/flex -a

<span class="c1"># Add all new packages to the repository</span>
sudo ./scripts/add_all_new_pkgs.sh packages/flex
</pre></div>
</div>
</div>
<div class="section" id="linux">
<h2>3.35. Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo ./scripts/build.sh packages/linux -a

<span class="c1"># Add all new packages to the repository</span>
sudo ./scripts/add_all_new_pkgs.sh packages/linux
</pre></div>
</div>
</div>
<div class="section" id="skalibs">
<h2>3.36. Skalibs<a class="headerlink" href="#skalibs" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo ./scripts/build.sh packages/skalibs -a

<span class="c1"># Add all new packages to the repository</span>
sudo ./scripts/add_all_new_pkgs.sh packages/skalibs
</pre></div>
</div>
</div>
<div class="section" id="execline">
<h2>3.37. Execline<a class="headerlink" href="#execline" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo ./scripts/build.sh packages/execline -a

<span class="c1"># Add all new packages to the repository</span>
sudo ./scripts/add_all_new_pkgs.sh packages/execline
</pre></div>
</div>
</div>
<div class="section" id="s6">
<h2>3.38. S6<a class="headerlink" href="#s6" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the package</span>
sudo ./scripts/build.sh packages/s6 -a

<span class="c1"># Add all new packages to the repository</span>
sudo ./scripts/add_all_new_pkgs.sh packages/s6
</pre></div>
</div>
<p>Great! At this point the core of the system is built and you have the run-time
packages required for a minimally functional system. It doesn’t really do much
though. In the next section we’ll add a couple of packages to demonstrate more
useful functionality, and prepare to create a bootable disk image.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extra.html" class="btn btn-neutral float-right" title="4. Extra Packages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="base-layout.html" class="btn btn-neutral float-left" title="2. Base Layout" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Jeremy Huntwork

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>